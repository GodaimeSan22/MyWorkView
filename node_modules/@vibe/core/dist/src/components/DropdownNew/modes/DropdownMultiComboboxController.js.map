{"version":3,"file":"DropdownMultiComboboxController.js","sources":["../../../../../src/components/DropdownNew/modes/DropdownMultiComboboxController.tsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { DropdownMultiControllerProps } from \"../Dropdown.types\";\nimport useDropdownMultiCombobox from \"../hooks/useDropdownMultiCombobox\";\nimport { BaseListItemData } from \"../../BaseListItem\";\nimport { DropdownContextProps } from \"../context/DropdownContext.types\";\nimport DropdownWrapperUI from \"../components/DropdownWrapperUI\";\n\nconst DropdownMultiComboboxController = <Item extends BaseListItemData<Record<string, unknown>>>(\n  props: DropdownMultiControllerProps<Item>\n) => {\n  const {\n    options,\n    isMenuOpen: isMenuOpenProp,\n    autoFocus,\n    defaultValue,\n    value,\n    inputValue: inputValueProp,\n    onChange,\n    onInputChange,\n    onMenuClose,\n    onMenuOpen,\n    onOptionSelect,\n    filterOption,\n    showSelectedOptions = false,\n    clearable = true,\n    searchable = true,\n    multi = true,\n    closeMenuOnSelect = true,\n    dropdownRef,\n    onFocus,\n    onBlur,\n    onKeyDown,\n    onClear,\n    onOptionRemove,\n    size = \"medium\"\n  } = props;\n\n  const initialMultiSelectedItems = Array.isArray(defaultValue) ? defaultValue : [];\n  const [multiSelectedItemsState, setMultiSelectedItemsState] = useState<Item[]>(initialMultiSelectedItems);\n  const [isFocused, setIsFocused] = useState(false);\n\n  const {\n    isOpen,\n    inputValue: hookInputValue,\n    highlightedIndex,\n    getToggleButtonProps,\n    getLabelProps,\n    getMenuProps,\n    getItemProps,\n    getInputProps: hookGetInputProps,\n    reset: hookReset,\n    toggleMenu,\n    filteredOptions,\n    selectedItems: hookSelectedItems,\n    addSelectedItem: hookAddSelectedItem,\n    removeSelectedItem: hookRemoveSelectedItem,\n    getDropdownProps\n  } = useDropdownMultiCombobox<Item>(\n    options,\n    multiSelectedItemsState,\n    setMultiSelectedItemsState,\n    isMenuOpenProp,\n    autoFocus,\n    defaultValue,\n    value,\n    inputValueProp,\n    onChange,\n    onInputChange,\n    onMenuClose,\n    onMenuOpen,\n    onOptionSelect,\n    filterOption,\n    showSelectedOptions\n  );\n\n  const contextValue: DropdownContextProps<Item> = {\n    ...props,\n    isOpen,\n    inputValue: hookInputValue ?? null,\n    highlightedIndex,\n    selectedItems: hookSelectedItems || [],\n    filteredOptions,\n    getToggleButtonProps,\n    getLabelProps,\n    getMenuProps,\n    getItemProps,\n    getInputProps: (inputOptions?: any) => {\n      return hookGetInputProps!({\n        ...(inputOptions || {}),\n        disabled: props.readOnly || props.disabled,\n        onFocus: (event: React.FocusEvent<HTMLInputElement>) => {\n          setIsFocused(true);\n          onFocus?.(event as any);\n          inputOptions?.onFocus?.(event);\n        },\n        onBlur: (event: React.FocusEvent<HTMLInputElement>) => {\n          setIsFocused(false);\n          onBlur?.();\n          inputOptions?.onBlur?.(event);\n        },\n        onKeyDown: (event: React.KeyboardEvent<HTMLInputElement>) => {\n          onKeyDown?.(event);\n          inputOptions?.onKeyDown?.(event);\n        }\n      });\n    },\n    reset: hookReset,\n    contextOnClear: () => {\n      hookReset();\n      if (value === undefined) {\n        setMultiSelectedItemsState([]);\n      }\n      onClear?.();\n    },\n    contextOnOptionRemove: (option: Item) => {\n      if (hookRemoveSelectedItem) {\n        hookRemoveSelectedItem(option);\n      }\n      onOptionRemove?.(option);\n    },\n    addSelectedItem: hookAddSelectedItem,\n    removeSelectedItem: hookRemoveSelectedItem,\n    isFocused,\n    clearable,\n    searchable,\n    multi,\n    closeMenuOnSelect,\n    size,\n    getDropdownProps,\n    toggleMenu\n  };\n\n  return <DropdownWrapperUI contextValue={contextValue} dropdownRef={dropdownRef} />;\n};\n\nexport default DropdownMultiComboboxController;\n"],"names":["DropdownMultiComboboxController","props","options","isMenuOpenProp","isMenuOpen","autoFocus","defaultValue","value","inputValueProp","inputValue","onChange","onInputChange","onMenuClose","onMenuOpen","onOptionSelect","filterOption","_props$showSelectedOp","showSelectedOptions","_props$clearable","clearable","_props$searchable","searchable","_props$multi","multi","_props$closeMenuOnSel","closeMenuOnSelect","dropdownRef","onFocus","onBlur","onKeyDown","onClear","onOptionRemove","_props$size","size","_useState","useState","Array","isArray","_useState2","_slicedToArray","multiSelectedItemsState","setMultiSelectedItemsState","_useState3","_useState4","isFocused","setIsFocused","_useDropdownMultiComb","useDropdownMultiCombobox","isOpen","hookInputValue","highlightedIndex","getToggleButtonProps","getLabelProps","getMenuProps","getItemProps","hookGetInputProps","getInputProps","hookReset","reset","toggleMenu","filteredOptions","hookSelectedItems","selectedItems","hookAddSelectedItem","addSelectedItem","hookRemoveSelectedItem","removeSelectedItem","getDropdownProps","contextValue","Object","assign","inputOptions","disabled","readOnly","event","_a","call","contextOnClear","undefined","contextOnOptionRemove","option","React","createElement","DropdownWrapperUI"],"mappings":"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"}